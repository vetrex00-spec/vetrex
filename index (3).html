<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŒ¿ Smart Farm AI | Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ø°ÙƒÙŠ</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif;}
body{background:#eef9ef;direction:rtl;}
.hidden{display:none;}
/* Login */
.login-container{
  display:flex;justify-content:center;align-items:center;height:100vh;
  background:linear-gradient(135deg,#00a86b,#0e6029);
}
.login-box{
  background:#fff;padding:30px;border-radius:15px;width:330px;text-align:center;
  box-shadow:0 0 15px rgba(0,0,0,0.2);
}
.login-box h2{color:#0e6029;margin-bottom:15px;}
.login-box input{
  width:100%;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:8px;text-align:center;
}
.login-box button{
  background:#0e6029;color:white;border:none;padding:10px 20px;border-radius:8px;
  cursor:pointer;width:100%;font-weight:bold;transition:0.3s;
}
.login-box button:hover{background:#00a86b;}
/* Dashboard */
.dashboard{padding:20px;text-align:center;}
h1{color:#0e6029;}
.btns{display:flex;flex-wrap:wrap;justify-content:center;margin-top:20px;gap:15px;}
.btns button{
  background:#00a86b;color:white;border:none;padding:15px 25px;border-radius:12px;
  font-size:16px;cursor:pointer;transition:0.3s;
}
.btns button:hover{background:#0e6029;}
.section{
  margin:25px auto;padding:20px;background:white;border-radius:15px;
  width:90%;max-width:600px;box-shadow:0 0 10px rgba(0,0,0,0.1);text-align:right;
}
label{display:block;margin:10px 0 5px;}
input,select{width:100%;padding:8px;border:1px solid #ccc;border-radius:8px;}
.tip{
  background:#f0fff4;padding:15px;border-left:5px solid #00a86b;border-radius:10px;
  margin-top:15px;font-style:italic;
}
/* Chatbot */
.chat-box{
  background:#fff;height:400px;overflow-y:auto;border-radius:15px;
  padding:10px;box-shadow:0 0 10px rgba(0,0,0,0.1);
}
.message{margin:8px 0;padding:10px;border-radius:10px;max-width:80%;}
.user{background:#d3f9d8;margin-left:auto;}
.bot{background:#e7f3ff;color:#0e6029;}
.chat-input{display:flex;margin-top:10px;}
.chat-input input{flex:1;padding:10px;border-radius:10px;border:1px solid #ccc;}
.chat-input button{margin-right:10px;background:#0e6029;color:#fff;border:none;padding:10px 20px;border-radius:10px;cursor:pointer;}
.eng{color:#555;font-size:0.9em;font-style:italic;margin-top:3px;}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginPage" class="login-container">
  <div class="login-box">
    <h2>ğŸŒ¿ Smart Farm AI</h2>
    <input id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… / Username">
    <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± / Password">
    <button onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ | Login</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden dashboard">
  <h1>ğŸ‘¨â€ğŸŒ¾ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ø°ÙƒÙŠ - Smart Farm AI</h1>
  <p>Ø§Ø®ØªØ± Ø®Ø¯Ù…Ø© / Choose a service:</p>
  <div class="btns">
    <button onclick="showSection('analysis')">ğŸ’§ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠ | Analysis</button>
    <button onclick="showSection('chatbot')">ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù…Ø²Ø±Ø¹Ø© | AI Chat</button>
    <button onclick="showSection('tips')">ğŸŒ± Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ… | Daily Tip</button>
  </div>

  <!-- Analysis -->
  <div id="analysis" class="section hidden">
    <h3>ğŸ” Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„Ø±ÙŠ ÙˆØ§Ù„Ø£Ø³Ù…Ø¯Ø©<br><span class="eng">Smart Analysis for Irrigation & Fertilization</span></h3>
    <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØµÙˆÙ„ / Crop</label>
    <select id="crop">
      <option>Ø·Ù…Ø§Ø·Ù… - Tomato</option><option>Ù‚Ù…Ø­ - Wheat</option>
      <option>Ø¨Ø·Ø§Ø·Ø³ - Potato</option><option>Ø°Ø±Ø© - Corn</option>
      <option>Ø®ÙŠØ§Ø± - Cucumber</option>
    </select>
    <label>Ù†ÙˆØ¹ Ø§Ù„ØªØ±Ø¨Ø© / Soil</label>
    <select id="soil">
      <option>Ø·ÙŠÙ†ÙŠØ© - Clay</option><option>Ø±Ù…Ù„ÙŠØ© - Sandy</option><option>Ø·Ù…ÙŠÙŠØ© - Loamy</option>
    </select>
    <label>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (Â°C) / Temperature</label>
    <input type="number" id="temp" placeholder="30">
    <label>Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø·ÙˆØ¨Ø© (%) / Humidity</label>
    <input type="number" id="humidity" placeholder="60">
    <button onclick="analyze()">Ø­Ù„Ù„ Ø§Ù„Ø¢Ù† | Analyze</button>
    <div id="result" class="tip"></div>
  </div>

  <!-- Chatbot -->
  <div id="chatbot" class="section hidden">
    <h3>ğŸ¤– Ø±ÙˆØ¨ÙˆØª â€œÙ…ÙØ³Ø¹Ø¯â€ Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠ<br><span class="eng">AI Assistant â€œMosaadâ€</span></h3>
    <div class="chat-box" id="chatBox">
      <div class="message bot">Ù…Ø±Ø­Ø¨Ù‹Ø§! Ø£Ù†Ø§ â€œÙ…ÙØ³Ø¹Ø¯â€ØŒ ÙƒÙŠÙ Ø£Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ ğŸ˜Š<br><span class="eng">Hello! I am Mosaad, how can I help you today?</span></div>
    </div>
    <div class="chat-input">
      <input id="userMsg" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§... / Type your question...">
      <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„ | Send</button>
    </div>
  </div>

  <!-- Tips -->
  <div id="tips" class="section hidden">
    <h3>ğŸŒ¿ Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©<br><span class="eng">Daily Farm Tip</span></h3>
    <div id="tipText" class="tip"></div>
  </div>
</div>

<audio id="clickSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
// Click Sound
function playClick(){document.getElementById("clickSound").play();}

// Login
function login(){playClick();document.getElementById("loginPage").classList.add("hidden");document.getElementById("dashboard").classList.remove("hidden");showTip();}

// Switch Sections
function showSection(id){playClick();document.querySelectorAll(".section").forEach(s=>s.classList.add("hidden"));document.getElementById(id).classList.remove("hidden");}

// Analysis Logic
function analyze(){
  playClick();
  let crop=document.getElementById("crop").value;
  let soil=document.getElementById("soil").value;
  let temp=parseFloat(document.getElementById("temp").value);
  let humidity=parseFloat(document.getElementById("humidity").value);
  let ar,en;

  if(soil.includes("Ø±Ù…Ù„") && temp>30){
    ar=`ğŸŒ Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ù…Ø±ØªÙØ¹Ø©ØŒ ÙŠÙÙØ¶Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±ÙŠ Ø¨Ø§Ù„ØªÙ†Ù‚ÙŠØ· Ù„Ù„Ù…Ø­ØµÙˆÙ„ (${crop}) ÙˆØªØ²ÙˆÙŠØ¯ Ø§Ù„Ù…Ø§Ø¡ ØµØ¨Ø§Ø­Ù‹Ø§ ÙÙ‚Ø·.`;
    en=`ğŸŒ The temperature is high; it is recommended to use drip irrigation for (${crop}) and water only in the morning.`;
  } else if(soil.includes("Ø·ÙŠÙ†") && humidity>70){
    ar=`ğŸ’§ Ø§Ù„ØªØ±Ø¨Ø© Ù…Ø´Ø¨Ø¹Ø©ØŒ Ø£ÙˆÙ‚Ù Ø§Ù„Ø±ÙŠ Ù…Ø¤Ù‚ØªÙ‹Ø§ Ù„ØªØ¬Ù†Ø¨ ØªØ¹ÙÙ† Ø§Ù„Ø¬Ø°ÙˆØ±.`;
    en=`ğŸ’§ The soil is saturated; stop irrigation temporarily to avoid root rot.`;
  } else {
    ar=`ğŸŒ± Ø§Ù„Ø±ÙŠ Ø¨Ø§Ù„Ø±Ø´ Ù…Ù†Ø§Ø³Ø¨ ÙÙŠ Ø§Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ù…Ø­ØµÙˆÙ„ (${crop}).`;
    en=`ğŸŒ± Sprinkler irrigation is suitable for the current conditions of (${crop}).`;
  }

  ar+=`<br>ğŸŒ¿ Ø§Ø³ØªØ®Ø¯Ù… 50% Ù…Ù† Ø§Ù„Ø£Ø³Ù…Ø¯Ø© Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø¨Ø¯Ù„ Ø§Ù„ÙƒÙŠÙ…Ø§ÙˆÙŠØ©.`;
  en+=`<br>ğŸŒ¿ Use 50% organic compost instead of chemical fertilizers.`;

  document.getElementById("result").innerHTML=ar+`<br><span class='eng'>${en}</span>`;
  speakBoth(ar,en);
}

// Chatbot
function sendMessage(){
  playClick();
  let box=document.getElementById("chatBox");
  let msg=document.getElementById("userMsg").value.trim();
  if(!msg) return;
  box.innerHTML+=`<div class='message user'>${msg}</div>`;
  document.getElementById("userMsg").value="";
  let reply=getBotReply(msg);
  setTimeout(()=>{
    box.innerHTML+=`<div class='message bot'>${reply}</div>`;
    box.scrollTop=box.scrollHeight;
    let ar=reply.split("<br>")[0];
    let en=reply.split("<span class='eng'>")[1]?.replace("</span>","");
    speakBoth(ar,en);
  },600);
}

function getBotReply(msg){
  msg=msg.toLowerCase();
  if(msg.includes("Ø³Ø¹Ø±") && msg.includes("Ø·Ù…Ø§Ø·Ù…"))
    return "Ø³Ø¹Ø± Ø¨Ø°ÙˆØ± Ø§Ù„Ø·Ù…Ø§Ø·Ù… ÙŠØªØ±Ø§ÙˆØ­ Ø¨ÙŠÙ† 200 Ø¥Ù„Ù‰ 350 Ø¬Ù†ÙŠÙ‡ Ù„Ù„ÙƒÙŠÙ„Ùˆ.<br><span class='eng'>Tomato seeds cost between 200 and 350 EGP per kilo.</span>";
  if(msg.includes("Ù‚Ù…Ø­"))
    return "Ø¨Ø°ÙˆØ± Ø§Ù„Ù‚Ù…Ø­ ØªØªØ±Ø§ÙˆØ­ Ù…Ù† 12 Ø¥Ù„Ù‰ 18 Ø¬Ù†ÙŠÙ‡ Ù„Ù„ÙƒÙŠÙ„Ùˆ.<br><span class='eng'>Wheat seeds range from 12 to 18 EGP per kilo.</span>";
  if(msg.includes("Ø±ÙŠ"))
    return "Ø£ÙØ¶Ù„ Ù†Ø¸Ø§Ù… Ø±ÙŠ Ù‡Ùˆ Ø§Ù„ØªÙ†Ù‚ÙŠØ· Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙØ§Ù‚Ø¯ ÙˆØ§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø§Ø¡.<br><span class='eng'>The best irrigation system is drip irrigation to reduce water loss.</span>";
  if(msg.includes("Ø³Ù…Ø§Ø¯"))
    return "Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒÙ…Ø¨ÙˆØ³Øª Ø§Ù„Ø¹Ø¶ÙˆÙŠ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ø£Ø³Ù…Ø¯Ø© Ø§Ù„ÙƒÙŠÙ…Ø§ÙˆÙŠØ© Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªØ±Ø¨Ø©.<br><span class='eng'>Use organic compost instead of chemical fertilizers to improve soil quality.</span>";
  return "Ø¹Ø°Ø±Ù‹Ø§ØŒ Ù„Ù… Ø£ÙÙ‡Ù… Ø³Ø¤Ø§Ù„Ùƒ Ø¬ÙŠØ¯Ù‹Ø§.<br><span class='eng'>Sorry, I didnâ€™t understand your question clearly.</span>";
}

// Daily Tip
function showTip(){
  const tips=[
    ["Ù„Ø§ ØªØ±ÙˆÙ Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ù†Ù‡Ø§Ø± Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªØ¨Ø®Ø±.","Do not water plants at midday to reduce evaporation."],
    ["Ø£Ø¶Ù Ø§Ù„ÙƒÙ…Ø¨ÙˆØ³Øª Ù…Ø±ØªÙŠÙ† ÙÙŠ Ø§Ù„Ù…ÙˆØ³Ù… Ù„ØªØ­Ø³ÙŠÙ† Ø®ØµÙˆØ¨Ø© Ø§Ù„ØªØ±Ø¨Ø©.","Add compost twice per season to improve soil fertility."],
    ["Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø±Ø·ÙˆØ¨Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø±ÙŠ Ù„ØªÙˆÙÙŠØ± Ø§Ù„Ù…ÙŠØ§Ù‡.","Check soil moisture before watering to save water."],
    ["Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø±ÙŠ Ø¨Ø§Ù„ØªÙ†Ù‚ÙŠØ· Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø§Ø¡ Ø¨Ø´ÙƒÙ„ Ù…ØªØ³Ø§ÙˆÙ.","Use drip irrigation for even water distribution."]
  ];
  let random=tips[Math.floor(Math.random()*tips.length)];
  document.getElementById("tipText").innerHTML=random[0]+"<br><span class='eng'>"+random[1]+"</span>";
  speakBoth(random[0],random[1]);
}

// Speech Function (Arabic then English)
function speakBoth(ar,en){
  let voices=speechSynthesis.getVoices();
  let arVoice=voices.find(v=>v.lang.startsWith("ar")||v.name.toLowerCase().includes("arab")||v.name.toLowerCase().includes("hoda"));
  let enVoice=voices.find(v=>v.lang.startsWith("en")||v.name.toLowerCase().includes("english"));

  let arUtter=new SpeechSynthesisUtterance(ar.replace(/<[^>]+>/g,""));
  arUtter.lang=arVoice?arVoice.lang:"ar-SA";
  arUtter.voice=arVoice||null;
  arUtter.rate=1;

  let enUtter=new SpeechSynthesisUtterance(en.replace(/<[^>]+>/g,""));
  enUtter.lang=enVoice?enVoice.lang:"en-US";
  enUtter.voice=enVoice||null;
  enUtter.rate=1;

  speechSynthesis.cancel();
  speechSynthesis.speak(arUtter);
  arUtter.onend=()=>speechSynthesis.speak(enUtter);
}

if (speechSynthesis.onvoiceschanged !== undefined) {
  speechSynthesis.onvoiceschanged = () => {};
}
</script>

</body>
</html>
